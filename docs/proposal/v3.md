# Detailed Proposal Draft

---

## 1. Background

### 1.1 心理咨询市场

- **供需失衡**：中国心理咨询师缺口大，单次咨询费用普遍在500-1000元区间，形成高门槛服务。
- **地域限制**：专业资源集中在一线城市集中，二三线城市用户获取服务困难。
- **认知滞后**：潜在需求者因"病耻感"回避线下咨询。

### 1.2 竞品报告

- **情智星球**：<https://www.sohu.com/a/830612921_122042791>
- **AI心语**：<https://news.qq.com/rain/a/20241106A09XWS00>
- **腾讯元宝**: <https://yuanbao.tencent.com/chat/iKmmPLmR1gwJ>

### 1.3 AI's Scope

#### Can

1. **颠覆性的成本结构**：以DeepSeek模型价格为例，每百万Token仅需几块钱，远低于人类心理咨询师价格。且不受地点、时间安排等限制。
2. **实时情绪响应**：7x24在线提供情感支持和安慰，帮助青少年表达和理解自己的情绪。
3. **信息和资源提供**：提供关于心理健康、应对策略等方面的信息。

#### Can Not

1. **深层次的情感问题**：如创伤处理、深层次的自我认同问题等，需要专业心理咨询师的介入。
2. **紧急情况**：如自杀倾向、严重的心理危机等，需要即时的专业干预。
3. **法律和医学问题**：如家庭暴力、严重精神疾病等，需要专业的法律和医学介入。
4. **用户认同问题**：LLM无法实现人与人之间的情感链接，用户可能主观上不愿与AI交流心理问题。

## 2. Our Scope

### 2.1 不做什么

| ​**Item**​                     | ​**Description**​                                                                                   |
|-------------------------------|---------------------------------------------------------------------------------------------------|
| ​**模型优化**​          | 专注于用 LLM 的能力提供心理咨询服务，而不是训练用于心理咨询的大模型。                            |
| ​**语音**​ | 文字与语音的转化是一个专业性很强的领域，本项目提供基于文本的回复。                               |

### 2.2 做什么

通过对话界面和流程设计，我们想借助于强大LLM的能力，以微信小程序作为交互载体，为青少年用户提供这样一个心理支持平台：

1. 温暖的、安全的、能提供情绪支持和应对建议的倾诉树洞
2. 提供有深度，但非评判性的情绪分析和事件提取机制
3. 通过认知成长勋章机制鼓励积极变化
4. 帮助用户追踪自己的情绪变化和成长历程

## 3. Design

### 3.1 基于LLM调用的对话流程

```txt
用户输入
   ↓
[用户消息处理]
   ↓（并行调用）
   ├──→ [LLM调用1: 情绪分析]
   │       ↓
   │    提取情绪类别和强度
   │       ↓
   │    生成情绪分析结果
   │
   ├──→ [LLM调用2: 事件提取]
   │       ↓
   │    识别关键事件描述
   │       ↓
   │    结构化事件数据
   │
   ├──→ [LLM调用3: 认知变化检测]
   │       ↓
   │    比对历史认知模式
   │       ↓
   │    识别新的认知视角
   │       ↓
   │    判断是否触发勋章奖励
   │
   └──→ [LLM调用4: 倾诉师回应生成]
           ↓
        生成情绪肯定回应
           ↓
        生成针对性建议
           ↓
[结果整合与展示]
   ↓
显示倾诉师回应
   ↓
展示测评结果面板
   ↓
[用户反馈处理]
   ↓
   ├── 用户确认/修正情绪分析
   ├── 用户确认/修正事件提取
   ├── 用户采纳/拒绝建议方案(锦囊)
   └── 用户确认认知成长勋章
   ↓
[数据存储]
   ↓
   ├── 更新用户情绪历史记录
   ├── 更新事件数据库
   ├── 更新采纳的解决方案
   └── 更新用户勋章成就
   ↓
准备接收下一轮用户输入
```

### 3.2 交互细节设计

1. 主对话界面

   主对话界面采用类似聊天软件的布局，但增加了导航栏和情绪温度计。界面从上到下分为以下几个部分：

   - 顶部导航栏：显示"心理对话"标题，左侧有导航栏展开按钮
   - 浮动功能区：可点击的情绪温度计浮动图标
   - 中部对话区域：占据屏幕主要空间，显示用户与AI倾诉师的对话内容
   - 底部输入区：文本输入框和发送按钮

2. 导航栏
   - 历史对话
   - 情绪回顾
   - 成长勋章

3. 情绪温度计
   - 情绪强度
   - 事件分析
   - 采纳机制

### 3.3 情绪与事件分析机制

### 3.4 锦囊（应对方案建议）机制

### 3.5 勋章（认知成长奖励）机制

### 3.6 数据结构设计

1. **对话消息接口与数据结构**

请求

```txt
POST /chat
```

请求参数

| 参数名 | 类型 | 必填 | 描述 |
|------|------|------|------|
| user_id | String | 是 | 用户唯一标识符 |
| session_id | String | 否 | 会话ID，用于跟踪对话上下文。若不提供则创建新会话 |
| message | String | 是 | 用户发送的消息内容 |
| timestamp | String | 否 | 消息发送的时间戳，ISO 8601格式。若不提供则使用服务器时间 |
| history | Array | 否 | 对话历史记录，用于提供上下文。若不提供或session_id已存在，则使用服务器保存的历史记录 |

响应

```json
{
  "message_id": "msg_123456",
  "content": "AI助手的回复内容",
  "timestamp": "2023-04-01T12:00:00Z",
}
```

错误响应

```json
{
  "error_code": 400,
  "error_message": "无效的请求参数"
}
```

## 4. 技术实现考虑

### 4.1 微信小程序

轻量级，免下载

### 4.2 服务端开发语言和框架

Python + Flask

学习成本低，部署速度快

### 4.3 LLM选型

- 对话生成：GPT-4或同等级别的模型，确保自然流畅的对话体验
- 情绪分析：专门训练过情绪识别的模型或微调版本
- 事件提取和解决方案生成：具备强大Reasonning能力的大模型

### 4.4 Prompt设计

为不同的LLM调用设计专门的提示词模板，确保输出符合预期格式。例如：

- 情绪分析提示词：明确要求输出情绪类别、强度和描述
- 事件提取提示词：指导模型识别关键事件并评估重要性
- 解决方案生成提示词：要求区分短期和长期方案，并提供具体步骤

### 4.5 数据安全与隐私

考虑以下数据安全措施：

- 用户数据加密存储
- 明确的隐私政策和数据使用说明
- 提供数据删除选项
- 遵循相关法规要求

### 4.6 性能优化

为提升用户体验，考虑以下优化：

- 对话生成优先处理，确保及时响应
- 其他分析任务异步处理，不阻塞主对话流程
- 使用缓存机制减少重复计算

## 5. 未来扩展

### 5.1 多模态输入支持

未来可考虑支持以下输入方式：

- 语音情绪分析
- 图片分享和分析
- 日记形式的长文本输入
- 外部聊天记录的导入

### 5.2 社区支持功能

可考虑增加以下社区功能：

- 匿名心理支持社区
- 专业心理咨询师在线咨询
- 心理健康知识库

### 5.3 个性化推荐系统

基于用户的对话历史和问题类型，提供个性化的：

- 心理健康文章推荐
- 适合的心理练习
- 相关书籍和资源

### 5.4 与专业心理服务的衔接

当检测到用户可能需要专业帮助时，提供：

- 专业心理咨询资源推荐
- 危机干预热线信息
